---
import { SITE_TITLE } from '../consts';
---

<header class="max-w-3xl mx-auto w-full px-4">
	<div class="flex w-full items-center justify-between py-6">
		<a href="/" class="text-2xl font-bold leading-7 whitespace-nowrap">
			{SITE_TITLE}
		</a>
		<nav class="flex items-center gap-x-5">
			<button
				id="menu-btn"
				class="p-2 sm:hidden"
				aria-label="Open Menu"
				aria-expanded="false"
				aria-controls="menu-items"
			>
				<svg id="menu-icon" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
					<path d="M4 6h16" /><path d="M7 12h13" /><path d="M10 18h10" />
				</svg>
				<svg id="close-icon" class="hidden" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
					<path d="M18 6l-12 12" /><path d="M6 6l12 12" />
				</svg>
			</button>
			<ul id="menu-items" class="hidden sm:flex items-center gap-x-5">
				<li><a href="/blog" class="font-medium hover:text-accent">Posts</a></li>
				<li><a href="/about" class="font-medium hover:text-accent">About</a></li>
				<li>
					<button
						id="theme-btn"
						class="flex items-center justify-center size-8 hover:text-accent cursor-pointer"
						title="Toggle light & dark theme"
						aria-label="auto"
						aria-live="polite"
					>
						<svg id="moon-icon" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
							<path d="M12 3c.132 0 .263 0 .393 0a7.5 7.5 0 0 0 7.92 12.446a9 9 0 1 1 -8.313 -12.454z" />
						</svg>
						<svg id="sun-icon" class="hidden" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
							<path d="M14.828 14.828a4 4 0 1 0 -5.656 -5.656a4 4 0 0 0 5.656 5.656z" />
							<path d="M6.343 17.657l-1.414 1.414" />
							<path d="M6.343 6.343l-1.414 -1.414" />
							<path d="M17.657 6.343l1.414 -1.414" />
							<path d="M17.657 17.657l1.414 1.414" />
							<path d="M4 12h-2" /><path d="M12 4v-2" />
							<path d="M20 12h2" /><path d="M12 20v2" />
						</svg>
					</button>
				</li>
			</ul>
		</nav>
	</div>
	<!-- Mobile menu -->
	<ul id="mobile-menu" class="hidden pb-4 flex-col gap-2 sm:hidden">
		<li><a href="/blog" class="block py-2 font-medium hover:text-accent">Posts</a></li>
		<li><a href="/about" class="block py-2 font-medium hover:text-accent">About</a></li>
	</ul>
	<hr class="border-border" aria-hidden="true">
</header>

<script>
function setupMenu() {
	const menuBtn = document.querySelector("#menu-btn");
	const mobileMenu = document.querySelector("#mobile-menu");
	const menuIcon = document.querySelector("#menu-icon");
	const closeIcon = document.querySelector("#close-icon");

	if (!menuBtn || !mobileMenu || !menuIcon || !closeIcon) return;

	menuBtn.addEventListener("click", () => {
		const expanded = menuBtn.getAttribute("aria-expanded") === "true";
		menuBtn.setAttribute("aria-expanded", expanded ? "false" : "true");
		menuBtn.setAttribute("aria-label", expanded ? "Open Menu" : "Close Menu");
		mobileMenu.classList.toggle("hidden");
		mobileMenu.classList.toggle("flex");
		menuIcon.classList.toggle("hidden");
		closeIcon.classList.toggle("hidden");
	});
}
setupMenu();
</script>
